## 0003 - Modernize Modals with Vuetify and Tighten Layout Padding

### Context
Modernize all modal dialogs to use Vuetify components and standard interaction patterns, and reduce global/layout padding to tighten the visual density. Keep behavior intact and preserve existing props/emits contracts across components.

- Replace custom Tailwind-based modals with Vuetify `v-dialog` + `v-card` shells
- Use Vuetify inputs/buttons within dialogs (`v-text-field`, `v-autocomplete`, `v-btn`, `v-alert`)
- Reduce overall layout padding/margins using Vuetify density and smaller container paddings

### Files To Change / Create
- `src/plugins/vuetify.js`
  - Add density defaults for dialog content and card actions where useful; confirm existing defaults for `VBtn`, `VTextField`, `VDialog`.
- `src/App.vue`
  - Reduce main container padding (e.g., `px-4 pt-4` → smaller). Optionally move content into `v-main`/`v-container` with configured max width while retaining current structure.
- `src/components/AddExpenseModal.vue`
  - Replace custom modal structure with `v-dialog` controlled by `isOpen` prop, `v-card` shell, `v-card-title`, `v-card-text`, and `v-card-actions`.
  - Use `v-autocomplete` for item with same suggestions and `v-text-field` for cost with `inputmode="decimal"`.
  - Keep emits: `close`, `save({ item, cost, date })`.
- `src/components/EditExpenseModal.vue`
  - Same conversion to `v-dialog` + `v-card`.
  - Use `v-text-field` for item and cost, and `v-text-field type="date"` for date.
  - Buttons: primary Save, outlined Delete, text Cancel. Keep emits: `close`, `save`, `delete`.
- `src/components/ChatModal.vue`
  - Convert to `v-dialog` + `v-card`. Body as scrollable `v-sheet` or `v-list` for messages.
  - Input row uses `v-text-field` and `v-btn`; show error via `v-alert`.
  - Keep emits: `close`, `added`.

References only (no UI change expected at this stage): `src/lib/useKeyboardBottomOffset`, `src/lib/useBodyScrollLock` (these can be removed after switching to `v-dialog` if no longer needed).

---

### Modal Migration Details

General modal shell for all three components:

- Model: `v-model="internalOpen"` or `:model-value="isOpen" @update:model-value="$emit('close')"` to map to existing `isOpen` prop.
- Structure: `v-dialog` → `v-card` → `v-card-title` (with close icon button) → `v-card-text` (form/body) → `v-card-actions` (buttons).
- Accessibility: ESC and backdrop close should emit `close`. Set `persistent` only when necessary; default allow backdrop close.
- Density: use Vuetify defaults with `density: 'comfortable'`; tighten spacing using `class="py-3 px-4"` inside `v-card-text` if needed.

Component-specific notes:

- AddExpenseModal
  - Replace `AutocompleteInput` with `v-autocomplete` using the same suggestions array; keep `v-model` binding to `item`.
  - Cost input: `v-text-field` with `type="text"` and `inputmode="decimal"`; add basic number rule for disabled state.
  - Primary button disabled until both item and numeric cost present.

- EditExpenseModal
  - Same inputs as Add; include date via `v-text-field type="date"`.
  - Keep `isValid` logic or translate into Vuetify `rules` and `v-form`.
  - Actions: Save (primary), Delete (outlined/error color), Cancel (text).

- ChatModal
  - Messages area: `v-sheet` with `max-height` and `overflow-auto` or `v-virtual-scroll` if needed later.
  - Input row: `v-text-field` bound to `input` with `@keydown.enter="sendMessage"`; Send `v-btn` disabled while `isSending`.
  - Error: `v-alert` (type error, density comfortable) above input row.

---

### Layout Padding Tightening

- App shell (`src/App.vue`)
  - Replace `<main class="mx-auto max-w-md px-4 pt-4">` with either:
    - `<v-main><v-container class="mx-auto" style="max-width: 700px" fluid><div class="px-3 pt-3">…</div></v-container></v-main>`; or
    - Keep existing structure and reduce to `px-3 pt-3` (or `px-2 pt-3` on small screens), preserving max width.
  - Logout button: convert to `v-btn` (variant text/tonal, small) in top-right to match Vuetify spacing.

- Vuetify defaults (`src/plugins/vuetify.js`)
  - Ensure `VTextField` and `VBtn` density is `comfortable` (already set).
  - Optionally set `VCard` defaults `{ rounded: 'lg' }` and apply tighter internal padding via component classes rather than global defaults to avoid regressions.

---

### Behavior / Logic (unchanged)
- Input validation, emits, and data shapes remain the same.
- `useKeyboardBottomOffset` and `useBodyScrollLock` can be removed from modals if redundant after `v-dialog` migration; behavior should stay equivalent (Vuetify manages focus trap and scroll locking).
- Chat request/response flow remains as implemented in `ChatModal.vue`.

---

### Implementation Steps
1. Update `src/plugins/vuetify.js` if needed: confirm defaults; optionally add `VCard` defaults.
2. Convert `AddExpenseModal.vue` to `v-dialog` + `v-card` and replace inputs/buttons with Vuetify equivalents.
3. Convert `EditExpenseModal.vue` similarly; implement Save/Delete/Cancel with Vuetify buttons and form validation.
4. Convert `ChatModal.vue` to `v-dialog` + `v-card`, with messages list, error alert, and input row using Vuetify components.
5. Reduce layout padding in `src/App.vue` main container and convert Logout to `v-btn`.
6. Build and verify dialog behaviors: focus trap, backdrop/ESC close, validation disabled states, emits.

---

### Testing & QA
- Add/Edit Modals
  - Open/close via parent triggers; backdrop and ESC emit `close`.
  - Validation disables Save until valid; save payload matches previous shape.
  - Keyboard on mobile does not obscure inputs; dialog positions above keyboard.

- Chat Modal
  - Message send flow works; disabled state while sending; error shows via `v-alert`.
  - Scroll behavior retains last message in view.

- Layout
  - Reduced padding applied consistently without clipping content; check mobile and desktop breakpoints.
  - No visual regressions to Day/Month content.

- Build
  - `npm run build` passes with no warnings from Vuetify usage. Verify `npm run dev` renders dialogs correctly.

